<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116928965-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-131176103-1');
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Replace Documents / Items node</title>
    <meta name="description" content="A node that allows to replace documents or items from a Dominodatabase (V10 +). It implements the new NodeJS APIs that allow youto interact with the Domino Q...">


    <link rel="stylesheet" href="/node-red-contrib-dominodb-docs/css/main.css">
    <link rel="stylesheet" href="/node-red-contrib-dominodb-docs/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/node-red-contrib-dominodb-docs/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Replace Documents / Items node | NodeRED dominodb Documentation</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Replace Documents / Items node" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A node that allows to replace documents or items from a Domino database (V10 +). It implements the new NodeJS APIs that allow you to interact with the Domino Query Language language. The node implements the following APIs: bulKRreplaceDocumentsByUnid API  to replace a list of Documents specified by a list of unids bulkReplaceItems API  to replace a list of Items from the Documents retrieved by a DQL Query bulkReplaceDocumentsByUnid API  to replace a list of Items from the Documents specified by a list of unids" />
<meta property="og:description" content="A node that allows to replace documents or items from a Domino database (V10 +). It implements the new NodeJS APIs that allow you to interact with the Domino Query Language language. The node implements the following APIs: bulKRreplaceDocumentsByUnid API  to replace a list of Documents specified by a list of unids bulkReplaceItems API  to replace a list of Items from the Documents retrieved by a DQL Query bulkReplaceDocumentsByUnid API  to replace a list of Items from the Documents specified by a list of unids" />
<link rel="canonical" href="http://localhost:4000/node-red-contrib-dominodb-docs/docs/fullDoc-ReplaceDocumentsNode/" />
<meta property="og:url" content="http://localhost:4000/node-red-contrib-dominodb-docs/docs/fullDoc-ReplaceDocumentsNode/" />
<meta property="og:site_name" content="NodeRED dominodb Documentation" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-23T20:18:49+01:00" />
<script type="application/ld+json">
{"description":"A node that allows to replace documents or items from a Domino database (V10 +). It implements the new NodeJS APIs that allow you to interact with the Domino Query Language language. The node implements the following APIs: bulKRreplaceDocumentsByUnid API  to replace a list of Documents specified by a list of unids bulkReplaceItems API  to replace a list of Items from the Documents retrieved by a DQL Query bulkReplaceDocumentsByUnid API  to replace a list of Items from the Documents specified by a list of unids","@type":"WebPage","url":"http://localhost:4000/node-red-contrib-dominodb-docs/docs/fullDoc-ReplaceDocumentsNode/","headline":"Replace Documents / Items node","dateModified":"2018-12-23T20:18:49+01:00","datePublished":"2018-12-23T20:18:49+01:00","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="http://localhost:4000/node-red-contrib-dominodb-docs/docs/fullDoc-ReplaceDocumentsNode/">
    <link rel="alternate" type="application/rss+xml" title="NodeRED dominodb Documentation" href="http://localhost:4000/node-red-contrib-dominodb-docs/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" style="color: #FEC70B; background-color: black" href="/node-red-contrib-dominodb-docs/">
                <!-- <span><img src="/node-red-contrib-dominodb-docs/img/ibmpos_black.jpg"></span> -->
                NodeRED dominodb Documentation
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/node-red-contrib-dominodb-docs/docs/fullDoc-Intro/">Programming Guide</a></li>
                <!-- <li ><a href="/node-red-contrib-dominodb-docs/blog/2017/05/03/jekyll-doc-theme/">Blog</a></li> -->
            </ul>

            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/node-red-contrib-dominodb-docs/docs/article-Intro/">Launch Article</a></li>
                <!-- <li ><a href="/node-red-contrib-dominodb-docs/blog/2017/05/03/jekyll-doc-theme/">Blog</a></li> -->
            </ul>

            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/node-red-contrib-dominodb-docs/docs/envSetup/">Environment Setup</a></li>
                <!-- <li ><a href="/node-red-contrib-dominodb-docs/blog/2017/05/03/jekyll-doc-theme/">Blog</a></li> -->
            </ul>
        
            <ul class="nav navbar-nav">
                <li><a href="https://github.com/stefanopog/node-red-contrib-dominodb/issues" target="_blank">Report Issues</a></li>
            </ul>
            
            
            <div class="navbar-right">
                <!-- <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="text" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form> -->
                <!-- <ul class="nav navbar-nav">
                    <li><a href="https://github.com/stefanopog/node-red-contrib-dominodb-docs"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul> -->
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading" style="color: #FEC70B; background-color: black" id="ph-1">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
          Programming Guide
        </a>
        <!-- <a role="button" data-toggle="collapse" data-parent="#accordion" href="/node-red-contrib-dominodb-docs/docs/icec/" aria-expanded="false" aria-controls="collapse-1">
          Programming Guide
        </a> -->
      </h4>
    </div>
    <div id="collapse-1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-Intro/">A new set of APIs</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-IntroNodeRed/">Introducing NodeRed</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-Details/">Details of the dominodb Node-RED package</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-ConfigurationNode/">The Configuration Node (dominodb)</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-DocumentMgrNode/">DocumentMgr node</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-GetDocumentsNode/">Get Documents Node</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-CreateDocumentsNode/">Create Documents node</a>
        
          
          
          <a class="list-group-item active" href="/node-red-contrib-dominodb-docs/docs/fullDoc-ReplaceDocumentsNode/">Replace Documents / Items node</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-DeleteDocumentsNode/">Delete Documents / Items node</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-ExplainQueryNode/">Explain Query Node</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-ErrorHandling/">Error Handling</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/fullDoc-TechnicalDetails/">Technical Details</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading" style="color: #FEC70B; background-color: black" id="ph-2">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
          Launch Article
        </a>
        <!-- <a role="button" data-toggle="collapse" data-parent="#accordion" href="/node-red-contrib-dominodb-docs/docs/icec/" aria-expanded="false" aria-controls="collapse-2">
          Launch Article
        </a> -->
      </h4>
    </div>
    <div id="collapse-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/article-Intro/">A new set of APIs</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/article-NodeRed/">The Domino 10 Node-RED nodes</a>
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/article-sample/">The new domino-db Node-RED nodes in action</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading" style="color: #FEC70B; background-color: black" id="ph-3">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3">
          Environment Setup
        </a>
        <!-- <a role="button" data-toggle="collapse" data-parent="#accordion" href="/node-red-contrib-dominodb-docs/docs/icec/" aria-expanded="false" aria-controls="collapse-3">
          Environment Setup
        </a> -->
      </h4>
    </div>
    <div id="collapse-3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/node-red-contrib-dominodb-docs/docs/envSetup/">Environment Setup</a>
        
      </ul>
    </div>
  </div>

</div>

        </div>

        <div class="col-md-10">
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/node-red-contrib-dominodb-docs/docs/fullDoc-CreateDocumentsNode/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/node-red-contrib-dominodb-docs/docs/fullDoc-DeleteDocumentsNode/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
      </ul>
    <div class="clear"></div>
    

            <hr>
            <h1>Replace Documents / Items node</h1>
            <div id="markdown-content-container"><p>A node that allows to replace <strong>documents</strong> or <strong>items</strong> from a Domino
database (V10 +). It implements the new <strong>NodeJS APIs</strong> that allow you
to interact with the <strong>Domino Query Language</strong> <a href="https://www-01.ibm.com/support/docview.wss?uid=ibm10729047">language</a>.<br />
The node implements the following APIs:</p>
<ul>
  <li><code class="highlighter-rouge">bulKRreplaceDocumentsByUnid API</code> <br />
to replace a list of Documents specified by a <strong>list of unids</strong></li>
  <li><code class="highlighter-rouge">bulkReplaceItems API</code> <br />
to replace a list of Items from the Documents retrieved by a <strong>DQL     Query</strong></li>
  <li><code class="highlighter-rouge">bulkReplaceDocumentsByUnid API</code> <br />
to replace a list of Items from the Documents specified by a <strong>list of unids</strong></li>
</ul>

<p>Clicking on any instance of the node, you can see the online help in the
rightmost panel of the Node-RED editor:<br />
<img src="../images/fullDocumentation/image20.png" alt="" /></p>

<p>The help describes the behavior of the node as well as all the input and
output parameters for the node itself.</p>

<h3 id="selecting-the-domino-server-and-database">Selecting the Domino Server and Database</h3>
<p>You can select the instance of your Domino Database using the <i style="color:red">Database selector</i>:<br />
<img src="../images/fullDocumentation/image21.png" alt="" /><br /></p>

<p>This provides access to the library of <strong>dominodb configurations</strong>.</p>

<h3 id="selecting-the-target">Selecting the target</h3>
<p>By means of the Docs or Items selector, you can choose to replace entire
documents or the value of certain items within the selected documents.<br />
<img src="../images/fullDocumentation/image22.png" alt="" /></p>

<p>It is, also, possible to configure the node to delegate to the incoming <code class="highlighter-rouge">msg.DDB_documentsOrItems</code> attribute the kind of operation to be performed. This is useful when, in your flow, you may want to decide which type of operation to perform based on status of your flow (vaid values are <strong>documents</strong> or <strong>items</strong>)</p>
<ul>
  <li>In this case, you will also have to provide input attributes for the
<strong>DQL Query</strong> string (as <code class="highlighter-rouge">msg.DDB_query</code>) or for the list of Unique Ids (as <code class="highlighter-rouge">msg.DDB_itemValuesById</code>).</li>
</ul>

<h3 id="selecting-the-operation">Selecting the operation</h3>
<p>By means of the <i style="color:red">Type selector</i>, you can choose to replace the documents identified by a <strong>DQL Query</strong> or by the list of Unique Ids associated to each document.<br />
<img src="../images/fullDocumentation/image23.png" alt="" /></p>

<p>It is, also, possible to configure the node to delegate to the incoming
<code class="highlighter-rouge">msg.DDB_queryOrIds</code> attribute the kind of operation to be performed. This is useful when, in your flow, you may want to decide which type of operation to perform based on the istatus of your flow (valid values are <strong>query</strong> or <strong>ids</strong>).</p>
<ul>
  <li>In this case, you will also have to provide input attributes for the <strong>DQL Query</strong> string (as <code class="highlighter-rouge">msg.DDB_query</code>) or for the list of Unique Ids (as <code class="highlighter-rouge">msg.DDB_itemValuesById</code>).</li>
</ul>

<p><strong><u>Note: </u></strong></p>

<p>This <i style="color:red">Type Selector</i> is only shown if you selected  <strong>Replace Items</strong> from the previous selector.<br />
In case you selected <strong>Replace Documents</strong>, the <strong>DQL Query</strong> option is not currently supported by the APIs.</p>

<h5 id="replacing-documents">Replacing Documents</h5>

<p>If you elected to replace entire documents, you will see the following panel:</p>

<p><img src="../images/fullDocumentation/image24.png" alt="" /></p>

<p>Apparently, you cannot specify which Documents you actually want to replace. This is normal.<br />
Actually, the API that will be used when you elected to be in this situation is the <code class="highlighter-rouge">bulkReplaceDocumentsByUnid API</code>. This API accepts an array of objects, where each object holds the <code class="highlighter-rouge">@unid</code> attribute in
addition to the name and values of the other items that will be assigned
to the new Domino documents that will replace the old ones.<br />
It is not really simple to write a complex array of JSON objects in an
input text. So, the msg.DDB_itemValuesById input attribute will be
used.</p>

<p>Here below is a simple example of how this attribute can be built by a
<strong>Function Node</strong> and passed to <strong>the Replace Doc/Items node</strong>.</p>

<p><img src="../images/fullDocumentation/image25.png" alt="" /></p>

<h5 id="replacing-items-by-query">Replacing Items by Query</h5>

<p>If you want to replace items within documents by specifying a <strong>DQL
Query</strong>, you will see the following panel:</p>

<p><img src="../images/fullDocumentation/image26.png" alt="" /></p>

<p>You can specify a valid <strong>DQL Query</strong> (in the above picture
‘nodejs’.status = ‘pending’ ) and a comma-separated list of
<strong>itemName=itemValue</strong> pairs (in the above picture customer=Mickey,
amount=123). The comma-separated list of <strong>itemName=itemValue</strong> pairs
contains the items that will be replaced for all Documents matching the
DQL query.</p>

<ul>
  <li>
    <p>The <em>DQL Query input</em> can be left empty in the editor. You can use
the msg.DDB_query input attribute to provide the information at
runtime.</p>
  </li>
  <li>
    <p>The <em>Results selector</em> allows to define the documents that will be
replaced.<br />
The possible values are:<br />
<img src="../images/fullDocumentation/image13.png" alt="" /></p>

    <ul>
      <li>
        <p><strong><em>Default</em></strong>:<br />
In this case the query will be executed without specifying any
<em>start</em> and <em>count</em> parameters. Only those documents which match
the default criteria (from index “0” to index “99”) will be
replaced</p>
      </li>
      <li>
        <p><strong><em>All Documents</em></strong><br />
In this case the items for all the documents matching the query
will be replaced.<br />
Be aware that this may be a huge number which may make your
NodeRED environment getting out of Memory.</p>
      </li>
      <li>
        <p><strong><em>By Page</em></strong><br />
In this case, you will be asked to specify the <em>start</em> and
<em>count</em> options in order to replace “<strong>count documents starting
at the start index</strong>”</p>

        <ul>
          <li>The <em>start</em> and <em>count</em> parameters can also be specified by
the incoming msg.DDB_startValue and msg.DDB_countValue.<br />
The values in the configuration panel override the incoming
values.</li>
        </ul>
      </li>
      <li>
        <p><strong><em>—set from DDB_displayResults--</em></strong><br />
The incoming msg.DDB_displayResults can be used to provide the
information at runtime. Valid values are “<strong>Default</strong>”,
“<strong>All</strong>” and “<strong>byPage</strong>”.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In the above picture, we are using <em>Defaults Options</em> for the query.
You can override them by unchecking the <em>Default Options checkbox</em>
and specifying different values for the Max View Entries, Max
Documents and Max Milliseconds parameters).<br />
<img src="../images/fullDocumentation/image14.png" alt="" /></p>
  </li>
  <li>
    <p>The <em>Item Values input</em> can be left empty in the editor. You can use
the msg.DDB_itemValues input attribute (which is an array of JSON
objects formatted in the following way:<br />
<img src="../images/fullDocumentation/image27.png" alt="" /></p>
  </li>
</ul>

<h5 id="replacing-items-by-unique-ids">Replacing Items by Unique Ids</h5>

<p>If you want to replace items within documents by specifying a list of
<strong>unique Ids</strong>, you will see the following panel:</p>

<p><img src="../images/fullDocumentation/image28.png" alt="" /></p>

<p>You can specify a comma-separated list of <strong>itemName=itemValue</strong> pairs
(in the above picture customer=MICKEY, amount=123).<br />
The <em>Item Values input</em> field defines the changed attributes that will
apply to all the selected documents.</p>

<ul>
  <li>The <em>Item Values input</em> can be left empty in the editor. You can use
the msg.DDB_itemValues input attribute (which is an array of JSON
objects formatted in the following way:<br />
<img src="../images/fullDocumentation/image27.png" alt="" /></li>
</ul>

<p>In order to provide the list of unique ids for replacing the items, we
need to go back to the API used in this situation, which is the
bulkReplaceItemsByUnid API. This API accepts, among other parameters, an
array of objects, where each object holds the @unid attribute in
addition to the name and values of the other items that will be assigned
to the new Domino documents that will replace the old ones.<br />
It is not really simple to write a complex array of JSON objects in an
input text. So, the msg.DDB_itemValuesById input attribute will be
used.</p>

<p>Here below is a simple example of how this attribute can be built by a
<strong>Function Node</strong> and passed to <strong>the Replace Doc/Items node</strong>.</p>

<p><img src="../images/fullDocumentation/image25.png" alt="" /></p>

<p>#####</p>

<h5 id="controlling-the-behavior-and-appearance-of-your-instance">Controlling the behavior and appearance of your instance</h5>

<ul>
  <li>
    <p>You can specify the behavior of the API in case of error<br />
<img src="../images/fullDocumentation/image16.png" alt="" /></p>
  </li>
  <li>
    <p>Do not forget to give a meaningful name to your newly created node<br />
<img src="../images/fullDocumentation/image17.png" alt="" /></p>
  </li>
</ul>

<h5 id="output">Output</h5>

<p>If the execution of the node successfully completes, the following
outputs will be provided:</p>

<p><img src="../images/fullDocumentation/image29.png" alt="" /></p>

<p>The DDB_docs array provides a list of Unique Ids representing the
documents that have been deleted or the items of which have been
deleted.</p>

<p>The DDB_result object contains the additional outputs provided by the
API, including the total number of documents matching the query, the
start index and the count value.<br />
<img src="../images/fullDocumentation/image19.png" alt="" /></p>
</div>
            <!-- <p class="text-center">
              <br />
              <a target="_blank" href="https://github.com/stefanopog/node-red-contrib-dominodb-docs/tree/gh-pages/_docs/fullDocumentation/fullDoc-ReplaceDocumentsNode.md" class="btn btn-default githubEditButton" role="button">
                <i class="fa fa-pencil fa-lg"></i> Improve this page
              </a>
            </p> -->
            <hr>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/node-red-contrib-dominodb-docs/docs/fullDoc-CreateDocumentsNode/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/node-red-contrib-dominodb-docs/docs/fullDoc-DeleteDocumentsNode/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
      </ul>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            NodeRED dominodb Documentation 2018 
            <!-- | -->
            <!-- Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a> -->
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/node-red-contrib-dominodb-docs'
</script>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/node-red-contrib-dominodb-docs/js/bootstrap.min.js "></script>
<script src="/node-red-contrib-dominodb-docs/js/typeahead.bundle.min.js "></script>
<script src="/node-red-contrib-dominodb-docs/js/clipboard.min.js "></script>

<script src="/node-red-contrib-dominodb-docs/js/main.js "></script>

</body>

</html>
